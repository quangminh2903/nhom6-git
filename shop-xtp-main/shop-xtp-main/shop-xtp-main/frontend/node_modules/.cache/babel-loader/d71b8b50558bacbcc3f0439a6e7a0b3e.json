{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\shop-xtp-main\\\\shop-xtp-main\\\\frontend\\\\src\\\\components\\\\Navbar\\\\pages\\\\cart\\\\ViewCart.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"./cart.module.scss\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Service from \"../../../api/shopService\";\nimport { FORMAT_PRICE } from \"./../../../../global/const\";\nimport ModalNoti from \"../ModalNoti/ModalNoti\";\nimport ModalConfirm from './../ModalConfirm/ModalConfirm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ViewCart() {\n  _s();\n\n  const [cart, setCart] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [messageConfirm, setMessageConfirm] = useState(\"\");\n  const [idOrder, setIdOrder] = useState(\"\");\n  const id = JSON.parse(window.localStorage.getItem(\"id\"));\n  const [value, setValue] = useState([]);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    Service.getListOrderCustomer(id).then(res => {\n      setCart(res.data);\n      const arrAmount = res.data.map(el => el.items[0].amount);\n      setValue(arrAmount);\n    });\n  }, [id, message]);\n\n  const handleAdd = index => {\n    value[index] = value[index] + 1;\n    setValue([...value]);\n  };\n\n  const handleApart = (id, index) => {\n    if (value[index] === 1) {\n      setIdOrder(id);\n      setMessageConfirm(\"Bạn có muốn xóa sản phẩm này khỏi giỏ hàng?\");\n    } else {\n      value[index] = value[index] - 1;\n      setValue([...value]);\n    }\n  };\n\n  const Answer = choice => {\n    if (choice) {\n      Service.updateOrder(idOrder, {\n        status: \"delete\"\n      }).then(() => {\n        setMessage(\"Xóa sản phẩm thành công\");\n        setMessageConfirm(\"\");\n        window.location.replace(\"/home\");\n      });\n    } else {\n      setMessageConfirm(\"\");\n    }\n  };\n\n  const HandleSuccess = () => {\n    window.location.reload();\n  };\n\n  const OnUpdate = (id, index) => {\n    Service.updateOrder(id, {\n      status: \"new\",\n      itemParams: {\n        amount: value[index]\n      }\n    }).then(() => {\n      setMessage(\"Thêm số lượng sản phẩm thành công\");\n    });\n  };\n\n  const OnDelete = id => {\n    setIdOrder(id);\n    setMessageConfirm(\"Bạn có muốn xóa sản phẩm này khỏi giỏ hàng?\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.viewcart,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.viewcartTable,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.title,\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          className: styles.titleName,\n          children: \"S\\u1EA2N PH\\u1EA8M\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u0110\\u01A0N GI\\xC1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"S\\u1ED0 L\\u01AF\\u1EE2NG\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          style: {\n            paddingRight: 60\n          },\n          children: \"S\\u1ED0 TI\\u1EC0N\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          className: styles.titleButton,\n          children: \"THAO T\\xC1C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), cart.length > 0 && cart.map((el, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.content,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.contentImage,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: el.items[0].product.image[0],\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.contentImageInfo,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: el.items[0].product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: el.items[0].product.material\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: el.items[0].product.color\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.contentPrice,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.price1,\n              children: FORMAT_PRICE(el.items[0].product.origin_price) + \"đ\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.price2,\n              children: FORMAT_PRICE(el.items[0].product.price) + \"đ\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.contentAmount,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              onClick: () => handleApart(el.id, index),\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 13\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: value[index]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 61\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n              onClick: () => handleAdd(index),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.price,\n            children: FORMAT_PRICE(el.items[0].product.price * value[index]) + \"đ\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.contentButton,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => OnDelete(el.id),\n              children: \"X\\xF3a\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => OnUpdate(el.id, index),\n              children: \"C\\u1EADp nh\\u1EADt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/payment\",\n              onClick: () => window.localStorage.setItem(\"idPayment\", JSON.stringify(el.id)),\n              className: styles.button102,\n              children: \"Thanh to\\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(ModalNoti, {\n              message: message,\n              done: HandleSuccess\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(ModalConfirm, {\n              message: messageConfirm,\n              answer: Answer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 10\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 18\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ViewCart, \"DviElquiDGYS0W91JF7Y8rGyClw=\");\n\n_c = ViewCart;\nexport default ViewCart;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewCart\");","map":{"version":3,"sources":["C:/Users/Admin/Downloads/shop-xtp-main/shop-xtp-main/frontend/src/components/Navbar/pages/cart/ViewCart.js"],"names":["styles","useEffect","useState","Link","Service","FORMAT_PRICE","ModalNoti","ModalConfirm","ViewCart","cart","setCart","message","setMessage","messageConfirm","setMessageConfirm","idOrder","setIdOrder","id","JSON","parse","window","localStorage","getItem","value","setValue","scrollTo","getListOrderCustomer","then","res","data","arrAmount","map","el","items","amount","handleAdd","index","handleApart","Answer","choice","updateOrder","status","location","replace","HandleSuccess","reload","OnUpdate","itemParams","OnDelete","viewcart","viewcartTable","title","titleName","paddingRight","titleButton","length","content","contentImage","product","image","contentImageInfo","name","material","color","contentPrice","price1","origin_price","price2","price","contentAmount","contentButton","setItem","stringify","button102"],"mappings":"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","sourcesContent":["import styles from \"./cart.module.scss\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Service from \"../../../api/shopService\";\nimport { FORMAT_PRICE } from \"./../../../../global/const\";\nimport ModalNoti from \"../ModalNoti/ModalNoti\";\nimport ModalConfirm from './../ModalConfirm/ModalConfirm';\n\nfunction ViewCart() {\n  const [cart, setCart] = useState([]);\n  const [message,setMessage]=useState(\"\")\n  const [messageConfirm,setMessageConfirm]=useState(\"\")\n  const [idOrder,setIdOrder]=useState(\"\")\n  const id = JSON.parse(window.localStorage.getItem(\"id\"));\n  const [value,setValue]=useState([])\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n\n  useEffect(() => {\n    Service.getListOrderCustomer(id).then((res) => {\n      setCart(res.data);\n     const arrAmount= res.data.map((el)=>el.items[0].amount)\n     setValue(arrAmount)\n    });\n  }, [id,message]);\n  const handleAdd=(index)=>{\n    value[index]=value[index]+1\n    setValue([...value])\n  }\n  const handleApart=(id,index)=>{\n    if(value[index]===1){\n      setIdOrder(id)\n      setMessageConfirm(\"Bạn có muốn xóa sản phẩm này khỏi giỏ hàng?\")\n    }else{\n     value[index]=value[index]-1\n     setValue([...value])\n    }\n  }\n  const Answer=(choice)=>{\n    if(choice){\n      Service.updateOrder(idOrder,{\n        status:\"delete\"\n      }).then(()=>{\n        setMessage(\"Xóa sản phẩm thành công\")\n        setMessageConfirm(\"\")\n        window.location.replace(\"/home\")\n      })\n    }else{\n      setMessageConfirm(\"\")\n    }\n  }\n  const HandleSuccess=()=>{\n    window.location.reload()\n  }\n  const OnUpdate =(id,index)=>{\n     Service.updateOrder(id,{\n      status:\"new\",\n      itemParams:{\n        amount:value[index]\n      }\n    }).then(()=>{\n      setMessage(\"Thêm số lượng sản phẩm thành công\")\n    })\n  }\n  const OnDelete =(id)=>{\n    setIdOrder(id)\n    setMessageConfirm(\"Bạn có muốn xóa sản phẩm này khỏi giỏ hàng?\")\n  }\n\n  return (\n    <div className={styles.viewcart}>\n      <div className={styles.viewcartTable}>\n        <div className={styles.title}>\n          <strong className={styles.titleName}>SẢN PHẨM</strong>\n          <strong>ĐƠN GIÁ</strong>\n          <strong>SỐ LƯỢNG</strong>\n          <strong style={{paddingRight:60}}>SỐ TIỀN</strong>\n          <strong className={styles.titleButton}>THAO TÁC</strong>\n        </div>\n        {cart.length>0&&cart.map((el,index)=>{\n          return <div key={index} className={styles.content}>\n          <div className={styles.contentImage}>\n            <img\n              src={ el.items[0].product.image[0] }\n              alt=\"\"\n            />\n            <div className={styles.contentImageInfo}>\n              <p>{ el.items[0].product.name }</p>\n              <p>{ el.items[0].product.material}</p>\n              <p>{ el.items[0].product.color }</p>\n            </div>\n          </div>\n          <div className={styles.contentPrice}>\n            <p className={styles.price1}>\n              {FORMAT_PRICE(el.items[0].product.origin_price) + \"đ\"\n                }\n            </p>\n            <p className={styles.price2}>\n              {FORMAT_PRICE(el.items[0].product.price) + \"đ\"\n                }\n            </p>\n          </div>\n          <div className={styles.contentAmount}>\n            <p onClick={()=>handleApart(el.id,index)}>-</p> <p>{value[index]}</p>{\" \"}\n            <p onClick={()=>handleAdd(index)}>+</p>\n          </div>\n          <p className={styles.price}>\n            {FORMAT_PRICE(el.items[0].product.price * value[index]) + \"đ\"\n             }\n          </p>\n         <div className={styles.contentButton}>\n         <button onClick={()=>OnDelete(el.id)} >Xóa</button>\n         <button onClick={()=>OnUpdate(el.id,index)} >Cập nhật</button>\n          <Link to=\"/payment\" onClick={()=> window.localStorage.setItem(\"idPayment\", JSON.stringify(el.id))} className={styles.button102}>Thanh toán</Link>\n          <ModalNoti message={message} done={HandleSuccess}/>\n          <ModalConfirm message={messageConfirm} answer={Answer}/>\n         </div>\n        </div>\n        })}\n      </div>\n    </div>\n  );\n}\nexport default ViewCart;\n"]},"metadata":{},"sourceType":"module"}