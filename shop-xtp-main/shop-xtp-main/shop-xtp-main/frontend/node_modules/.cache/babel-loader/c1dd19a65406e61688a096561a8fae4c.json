{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\shop-xtp-main\\\\shop-xtp-main\\\\frontend\\\\src\\\\components\\\\Navbar\\\\pages\\\\account\\\\AccountInfor.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"./Account.module.scss\";\nimport { Button } from \"react-bootstrap\";\nimport { useState, useEffect } from \"react\";\nimport Service from \"./../../../api/shopService\";\nimport { CheckDate, checkInterger, reverseBirthday, strTrim } from \"./../../../../global/const\";\nimport ModalNoti from \"./../ModalNoti/ModalNoti\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AccountInfor() {\n  _s();\n\n  const id = JSON.parse(window.localStorage.getItem(\"id\"));\n  const [userName, setUserName] = useState(\"\");\n  const [birthday, setBirthday] = useState(\"\");\n  const [showValidBirthday, setShowValidBirthday] = useState(false);\n  const [phone, setPhone] = useState(\"\");\n  const [showValidPhone, setShowValidPhone] = useState(false);\n  const [cccd, setCccd] = useState(\"\");\n  const [showValidCccd, setShowValidCccd] = useState(false);\n  const [password, setPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [retypePassword, setRetypePassword] = useState(\"\");\n  const [toggle1, setToggle1] = useState(false);\n  const [toggle2, setToggle2] = useState(false);\n  const [toggle3, setToggle3] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    Service.getCustomer(id).then(res => {\n      setUserName(res.data.username);\n      setBirthday(reverseBirthday(res.data.birthday));\n      setPhone(res.data.phone);\n      setCccd(res.data.cccd);\n    });\n  }, [id]);\n\n  const OnChangeBirthday = e => {\n    setBirthday(e);\n    const comp = e.split(\"-\");\n    setShowValidBirthday(!CheckDate(comp));\n  };\n\n  const OnChangeCccd = e => {\n    setCccd(e);\n    setShowValidCccd(!checkInterger(e) || strTrim(e) !== 9 && strTrim(e) !== 12);\n  };\n\n  const OnChangePhone = e => {\n    setPhone(e);\n    setShowValidPhone(!checkInterger(e) || strTrim(e) !== 10);\n  };\n\n  const OnChangeNewPassword = e => {\n    setNewPassword(e);\n    setToggle2(strTrim(e) < 6);\n  };\n\n  const OnChangeRetypePassword = e => {\n    setRetypePassword(e);\n    setToggle3(e !== newPassword);\n  };\n\n  const handleSubmit = () => {\n    if (strTrim(password) === 0) {\n      if (!showValidBirthday && !showValidCccd && !showValidPhone) {\n        Service.updateCustomer(id, {\n          cccd: cccd,\n          phone: phone,\n          birthday: reverseBirthday(birthday)\n        }).then(res => {\n          setMessage(\"Sửa thông tin thành công\");\n        });\n      } else {\n        setMessage(\"Vui lòng nhập đầy đủ thông tin\");\n      }\n    } else {\n      Service.getLogin({\n        username: userName,\n        password: password\n      }).then(() => {\n        if (!toggle2 && !toggle3 && strTrim(newPassword) !== 0 && strTrim(retypePassword) !== 0 && !showValidBirthday && !showValidCccd && !showValidPhone) {\n          Service.setPassword({\n            customer_id: id,\n            password: newPassword\n          }).then(() => {\n            Service.updateCustomer(id, {\n              cccd: cccd,\n              phone: phone,\n              birthday: reverseBirthday(birthday)\n            }).then(() => {\n              setMessage(\"Sửa thông tin thành công\");\n              setNewPassword(\"\");\n              setPassword(\"\");\n              setRetypePassword(\"\");\n            });\n          });\n        } else {\n          setMessage(\"Vui lòng nhập đầy đủ thông tin\");\n        }\n      }).catch(() => {\n        setToggle1(true);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.accountInfor,\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"TH\\xD4NG TIN C\\xC1 NH\\xC2N\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.accountInforName,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: userName,\n            className: styles.Input,\n            placeholder: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\",\n            type: \"text\",\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ng\\xE0y sinh *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: styles.Input,\n            value: birthday,\n            onChange: e => OnChangeBirthday(e.target.value),\n            type: \"text\",\n            placeholder: \"Ng\\xE0y sinh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), showValidBirthday && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Vui l\\xF2ng nh\\u1EADp \\u0111\\xFAng \\u0111\\u1ECBnh d\\u1EA1ng dd-mm-yyyy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"C\\u0103n c\\u01B0\\u1EDBc c\\xF4ng d\\xE2n *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: cccd,\n            onChange: e => OnChangeCccd(e.target.value),\n            className: styles.Input,\n            placeholder: \"cccd\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), showValidCccd && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Vui l\\xF2ng c\\u0103n c\\u01B0\\u1EDBc c\\xF4ng d\\xE2n 9 ho\\u1EB7c 12 ch\\u1EEF s\\u1ED1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: styles.Input,\n            value: phone,\n            onChange: e => OnChangePhone(e.target.value),\n            type: \"text\",\n            placeholder: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), showValidPhone && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Vui l\\xF2ng nh\\u1EADp \\u0111\\xFAng s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"THAY \\u0110\\u1ED4I M\\u1EACT KH\\u1EA8U\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"M\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i (b\\u1ECF tr\\u1ED1ng n\\u1EBFu kh\\xF4ng \\u0111\\u1ED5i)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: \"100%\"\n          },\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          type: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), toggle1 && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"M\\u1EADt kh\\u1EA9u kh\\xF4ng \\u0111\\xFAng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: \"100%\"\n          },\n          value: newPassword,\n          onChange: e => OnChangeNewPassword(e.target.value),\n          type: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), toggle2 && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"M\\u1EADt kh\\u1EA9u \\xEDt nh\\u1EA5t c\\xF3 6 k\\xFD t\\u1EF1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: \"100%\"\n          },\n          value: retypePassword,\n          onChange: e => OnChangeRetypePassword(e.target.value),\n          type: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), toggle3 && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"M\\u1EADt kh\\u1EA9u kh\\xF4ng tr\\xF9ng kh\\u1EDBp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          margin: \"20px 0\"\n        },\n        onClick: handleSubmit,\n        variant: \"danger\",\n        children: \"L\\u01AFU THAY \\u0110\\u1ED4I\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalNoti, {\n      message: message,\n      done: () => setMessage(\"\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(AccountInfor, \"3pBZd+/9C+IcvrsddclgyengEeI=\");\n\n_c = AccountInfor;\nexport default AccountInfor;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountInfor\");","map":{"version":3,"sources":["C:/Users/Admin/Downloads/shop-xtp-main/shop-xtp-main/frontend/src/components/Navbar/pages/account/AccountInfor.js"],"names":["styles","Button","useState","useEffect","Service","CheckDate","checkInterger","reverseBirthday","strTrim","ModalNoti","AccountInfor","id","JSON","parse","window","localStorage","getItem","userName","setUserName","birthday","setBirthday","showValidBirthday","setShowValidBirthday","phone","setPhone","showValidPhone","setShowValidPhone","cccd","setCccd","showValidCccd","setShowValidCccd","password","setPassword","newPassword","setNewPassword","retypePassword","setRetypePassword","toggle1","setToggle1","toggle2","setToggle2","toggle3","setToggle3","message","setMessage","getCustomer","then","res","data","username","OnChangeBirthday","e","comp","split","OnChangeCccd","OnChangePhone","OnChangeNewPassword","OnChangeRetypePassword","handleSubmit","updateCustomer","getLogin","customer_id","catch","accountInfor","accountInforName","Input","target","value","width","margin"],"mappings":"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","sourcesContent":["import styles from \"./Account.module.scss\";\nimport { Button } from \"react-bootstrap\";\nimport { useState, useEffect } from \"react\";\nimport Service from \"./../../../api/shopService\";\nimport {\n  CheckDate,\n  checkInterger,\n  reverseBirthday,\n  strTrim,\n} from \"./../../../../global/const\";\nimport ModalNoti from \"./../ModalNoti/ModalNoti\";\nfunction AccountInfor() {\n  const id = JSON.parse(window.localStorage.getItem(\"id\"));\n  const [userName, setUserName] = useState(\"\");\n  const [birthday, setBirthday] = useState(\"\");\n  const [showValidBirthday, setShowValidBirthday] = useState(false);\n  const [phone, setPhone] = useState(\"\");\n  const [showValidPhone, setShowValidPhone] = useState(false);\n  const [cccd, setCccd] = useState(\"\");\n  const [showValidCccd, setShowValidCccd] = useState(false);\n  const [password, setPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [retypePassword, setRetypePassword] = useState(\"\");\n  const [toggle1, setToggle1] = useState(false);\n  const [toggle2, setToggle2] = useState(false);\n  const [toggle3, setToggle3] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    Service.getCustomer(id).then((res) => {\n      setUserName(res.data.username);\n      setBirthday(reverseBirthday(res.data.birthday));\n      setPhone(res.data.phone);\n      setCccd(res.data.cccd);\n    });\n  }, [id]);\n\n  const OnChangeBirthday = (e) => {\n    setBirthday(e);\n    const comp = e.split(\"-\");\n    setShowValidBirthday(!CheckDate(comp));\n  };\n  const OnChangeCccd = (e) => {\n    setCccd(e);\n    setShowValidCccd(\n      !checkInterger(e) || (strTrim(e) !== 9 && strTrim(e) !== 12)\n    );\n  };\n  const OnChangePhone = (e) => {\n    setPhone(e);\n    setShowValidPhone(!checkInterger(e) || strTrim(e) !== 10);\n  };\n  const OnChangeNewPassword = (e) => {\n    setNewPassword(e);\n    setToggle2(strTrim(e) < 6);\n  };\n  const OnChangeRetypePassword = (e) => {\n    setRetypePassword(e);\n    setToggle3(e !== newPassword);\n  };\n  const handleSubmit = () => {\n    if (strTrim(password) === 0) {\n      if (!showValidBirthday && !showValidCccd && !showValidPhone) {\n        Service.updateCustomer(id, {\n          cccd: cccd,\n          phone: phone,\n          birthday: reverseBirthday(birthday),\n        }).then((res) => {\n          setMessage(\"Sửa thông tin thành công\");\n        });\n      } else {\n        setMessage(\"Vui lòng nhập đầy đủ thông tin\");\n      }\n    } else {\n      Service.getLogin({\n        username: userName,\n        password: password,\n      })\n        .then(() => {\n          if (\n            !toggle2 &&\n            !toggle3 &&\n            strTrim(newPassword) !== 0 &&\n            strTrim(retypePassword) !== 0 &&\n            !showValidBirthday &&\n            !showValidCccd &&\n            !showValidPhone\n          ) {\n            Service.setPassword({\n              customer_id:id,\n              password:newPassword\n            }).then(()=>{\n              Service.updateCustomer(id, {\n                cccd: cccd,\n                phone: phone,\n                birthday: reverseBirthday(birthday),\n              }).then(() => {\n                setMessage(\"Sửa thông tin thành công\");\n                setNewPassword(\"\")\n                setPassword(\"\")\n                setRetypePassword(\"\")\n              });\n            })\n          } else {\n            setMessage(\"Vui lòng nhập đầy đủ thông tin\")\n          }\n        })\n        .catch(() => {\n          setToggle1(true);\n        });\n    }\n  };\n\n  return (\n    <>\n      <div className={styles.accountInfor}>\n        <h5>THÔNG TIN CÁ NHÂN</h5>\n        {/* {success && <p className={styles.success}>Cập nhật thành công</p>}\n        {err && <p className={styles.err}>Vui lòng nhập đầy đủ thông tin</p>} */}\n        <div className={styles.accountInforName}>\n          <div>\n            <p>Tên đăng nhập *</p>\n            <input\n              value={userName}\n              className={styles.Input}\n              placeholder=\"Tên đăng nhập\"\n              type=\"text\"\n              disabled\n            />\n          </div>\n          <div>\n            <p>Ngày sinh *</p>\n            <input\n              className={styles.Input}\n              value={birthday}\n              onChange={(e) => OnChangeBirthday(e.target.value)}\n              type=\"text\"\n              placeholder=\"Ngày sinh\"\n            />\n            {showValidBirthday && (\n              <span>Vui lòng nhập đúng định dạng dd-mm-yyyy</span>\n            )}\n          </div>\n          <div>\n            <p>Căn cước công dân *</p>\n            <input\n              value={cccd}\n              onChange={(e) => OnChangeCccd(e.target.value)}\n              className={styles.Input}\n              placeholder=\"cccd\"\n              type=\"text\"\n            />\n            {showValidCccd && (\n              <span>Vui lòng căn cước công dân 9 hoặc 12 chữ số</span>\n            )}\n          </div>\n          <div>\n            <p>Số điện thoại *</p>\n            <input\n              className={styles.Input}\n              value={phone}\n              onChange={(e) => OnChangePhone(e.target.value)}\n              type=\"text\"\n              placeholder=\"Số điện thoại\"\n            />\n            {showValidPhone && <span>Vui lòng nhập đúng số điện thoại</span>}\n          </div>\n        </div>\n\n        <h5>THAY ĐỔI MẬT KHẨU</h5>\n        <div>\n          <p>Mật khẩu hiện tại (bỏ trống nếu không đổi)</p>\n          <input\n            style={{ width: \"100%\" }}\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            type=\"password\"\n          />\n          {toggle1 && <span>Mật khẩu không đúng</span>}\n        </div>\n        <div>\n          <p>Mật khẩu mới</p>\n          <input\n            style={{ width: \"100%\" }}\n            value={newPassword}\n            onChange={(e) => OnChangeNewPassword(e.target.value)}\n            type=\"password\"\n          />\n          {toggle2 && <span>Mật khẩu ít nhất có 6 ký tự</span>}\n        </div>\n        <div>\n          <p>Xác nhận mật khẩu mới</p>\n          <input\n            style={{ width: \"100%\" }}\n            value={retypePassword}\n            onChange={(e) => OnChangeRetypePassword(e.target.value)}\n            type=\"password\"\n          />\n          {toggle3 && <span>Mật khẩu không trùng khớp</span>}\n        </div>\n        <Button\n          style={{ margin: \"20px 0\" }}\n          onClick={handleSubmit}\n          variant=\"danger\"\n        >\n          LƯU THAY ĐỔI\n        </Button>\n      </div>\n      <ModalNoti message={message} done={() => setMessage(\"\")} />\n    </>\n  );\n}\n\nexport default AccountInfor;\n"]},"metadata":{},"sourceType":"module"}